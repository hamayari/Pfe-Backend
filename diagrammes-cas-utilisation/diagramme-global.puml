@startuml
title Diagramme de cas d'utilisation global - Système de gestion des conventions et facturations

left to right direction

actor "Administrateur" as Admin
actor "Commercial Métier" as Commercial
actor "Chef de Projet" as ChefProjet
actor "Décideur" as Decideur

rectangle "Système de Gestion" {
  
  package "Authentification" {
    usecase "S'authentifier" as UC_Auth
    usecase "Se connecter" as UC_Login
    usecase "Se déconnecter" as UC_Logout
    usecase "Consulter mon profil" as UC_Profile
    usecase "Modifier mon compte" as UC_ModifyAccount
    usecase "Réinitialiser le mot de passe" as UC_ResetPwd
    usecase "Recevoir un lien de réinitialisation par e-mail" as UC_EmailReset
  }
  
  package "Gestion des Utilisateurs" {
    usecase "Gérer les comptes utilisateurs" as UC_ManageUsers
    usecase "Créer un utilisateur" as UC_CreateUser
    usecase "Modifier un utilisateur" as UC_UpdateUser
    usecase "Supprimer un utilisateur" as UC_DeleteUser
    usecase "Attribuer des rôles" as UC_AssignRoles
  }
  
  package "Gestion des Nomenclatures" {
    usecase "Gérer les nomenclatures" as UC_ManageNomenclatures
    usecase "Gérer les applications" as UC_ManageApps
    usecase "Gérer les zones géographiques" as UC_ManageZones
    usecase "Gérer les structures" as UC_ManageStructures
  }
  
  package "Gestion des Conventions" {
    usecase "Gérer les conventions" as UC_ManageConventions
    usecase "Créer une convention" as UC_CreateConvention
    usecase "Modifier une convention" as UC_UpdateConvention
    usecase "Supprimer une convention" as UC_DeleteConvention
    usecase "Consulter les conventions" as UC_ViewConventions
  }
  
  package "Gestion des Factures" {
    usecase "Gérer les factures" as UC_ManageInvoices
    usecase "Générer automatiquement les factures" as UC_GenerateInvoices
    usecase "Mettre à jour le statut d'une facture" as UC_UpdateInvoiceStatus
    usecase "Consulter les factures" as UC_ViewInvoices
    usecase "Visualiser les échéances dépassées" as UC_ViewOverdue
  }
  
  package "Gestion des Notifications" {
    usecase "Paramétrer les notifications" as UC_ConfigNotifications
    usecase "Définir le délai avant échéance" as UC_SetDeadline
    usecase "Recevoir des notifications par e-mail" as UC_EmailNotif
    usecase "Recevoir des notifications par SMS" as UC_SMSNotif
  }
  
  package "Tableau de Bord" {
    usecase "Consulter le tableau de bord" as UC_Dashboard
    usecase "Filtrer par gouvernorat" as UC_FilterGov
    usecase "Filtrer par structure" as UC_FilterStruct
    usecase "Filtrer par application" as UC_FilterApp
    usecase "Analyser les données" as UC_AnalyzeData
  }
  
  package "Supervision" {
    usecase "Superviser les conventions" as UC_SuperviseConv
    usecase "Superviser les facturations" as UC_SuperviseInv
    usecase "Interagir avec les commerciaux" as UC_InteractCommercial
  }
}

' Relations Administrateur
Admin --> UC_Auth
Admin --> UC_Profile
Admin --> UC_ModifyAccount
Admin --> UC_ResetPwd
Admin --> UC_ManageUsers
Admin --> UC_ManageNomenclatures
Admin --> UC_ConfigNotifications

' Relations Commercial Métier
Commercial --> UC_Auth
Commercial --> UC_Profile
Commercial --> UC_ModifyAccount
Commercial --> UC_ResetPwd
Commercial --> UC_ManageConventions
Commercial --> UC_ManageInvoices
Commercial --> UC_ViewConventions
Commercial --> UC_ViewInvoices

' Relations Chef de Projet
ChefProjet --> UC_Auth
ChefProjet --> UC_Profile
ChefProjet --> UC_ModifyAccount
ChefProjet --> UC_SuperviseConv
ChefProjet --> UC_SuperviseInv
ChefProjet --> UC_InteractCommercial
ChefProjet --> UC_ViewConventions
ChefProjet --> UC_ViewInvoices

' Relations Décideur
Decideur --> UC_Auth
Decideur --> UC_Profile
Decideur --> UC_Dashboard

' Relations include et extend
UC_Auth ..> UC_Login : <<include>>
UC_Auth ..> UC_Logout : <<extend>>
UC_ResetPwd ..> UC_EmailReset : <<include>>

UC_ManageUsers ..> UC_CreateUser : <<include>>
UC_ManageUsers ..> UC_UpdateUser : <<include>>
UC_ManageUsers ..> UC_DeleteUser : <<include>>
UC_ManageUsers ..> UC_AssignRoles : <<include>>

UC_ManageNomenclatures ..> UC_ManageApps : <<include>>
UC_ManageNomenclatures ..> UC_ManageZones : <<include>>
UC_ManageNomenclatures ..> UC_ManageStructures : <<include>>

UC_ManageConventions ..> UC_CreateConvention : <<include>>
UC_ManageConventions ..> UC_UpdateConvention : <<include>>
UC_ManageConventions ..> UC_DeleteConvention : <<include>>

UC_ManageInvoices ..> UC_GenerateInvoices : <<include>>
UC_ManageInvoices ..> UC_UpdateInvoiceStatus : <<include>>
UC_UpdateInvoiceStatus ..> UC_ViewOverdue : <<extend>>

UC_ConfigNotifications ..> UC_SetDeadline : <<include>>
UC_ConfigNotifications ..> UC_EmailNotif : <<include>>
UC_ConfigNotifications ..> UC_SMSNotif : <<include>>

UC_Dashboard ..> UC_FilterGov : <<include>>
UC_Dashboard ..> UC_FilterStruct : <<include>>
UC_Dashboard ..> UC_FilterApp : <<include>>
UC_Dashboard ..> UC_AnalyzeData : <<include>>

@enduml
